<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø±Ø¶</title>
  <meta name="description" content="Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ø¥Ø¶Ø§ÙØ© ÙˆØªØ¹Ø¯ÙŠÙ„ ÙˆØ­Ø°Ù Ø³ÙŠØ§Ø±Ø§Øª Ù…Ø¹ Ø§Ø³ØªÙŠØ±Ø§Ø¯/ØªØµØ¯ÙŠØ± JSON." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #F5F7FA; --bg-soft:#F9FAFB; --card:#FFFFFF; --border:#E5E7EB; --ink:#1F2937; --heading:#111827; --accent:#2563EB; --accent-2:#3B82F6; --muted:#6B7280; --focus:#2563EB; --radius:14px; --shadow-1:0 6px 16px rgba(0,0,0,.06); --shadow-2:0 16px 32px rgba(0,0,0,.10); --container:1180px;
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink);line-height:1.65}
    a{text-decoration:none;color:inherit}
    :focus-visible{outline:3px solid var(--focus);outline-offset:2px}
    .container{width:min(var(--container),96%);margin-inline:auto}

    header.site{position:sticky;top:0;z-index:50;background:rgba(249,250,251,.92);backdrop-filter:saturate(140%) blur(6px);border-bottom:1px solid var(--border)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:.6rem 0}
    .brand{display:flex;align-items:center;gap:.7rem;font-weight:800;color:var(--heading)}
    .brand-mark{width:40px;height:40px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#fff;box-shadow:var(--shadow-1);font-weight:900}

    .toolbar{display:flex;gap:.6rem;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;padding:.6rem .9rem;border-radius:10px;border:1px solid var(--border);background:#fff;color:var(--ink);font-weight:700;cursor:pointer;transition:transform .08s ease,filter .2s ease,box-shadow .2s ease}
    .btn.primary{background:linear-gradient(135deg,var(--accent),var(--accent-2));border-color:#93C5FD;color:#fff}
    .btn.danger{background:#ef4444;color:#fff;border-color:#ef4444}
    .btn.soft{background:#f3f4f6}

    .layout{display:grid;grid-template-columns:1.1fr .9fr;gap:1rem;align-items:start;margin:1rem 0}
    .panel{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow-1);overflow:hidden}
    .panel header{padding:.7rem 1rem;border-bottom:1px solid var(--border);background:var(--bg-soft);display:flex;align-items:center;justify-content:space-between}
    .panel .content{padding:.8rem}

    .list{display:grid;gap:.5rem}
    .list-item{display:grid;grid-template-columns:1fr auto;gap:.5rem;align-items:center;padding:.55rem .7rem;border:1px solid var(--border);border-radius:10px;background:#fff}
    .list-item:hover{box-shadow:var(--shadow-1)}
    .badge{padding:.15rem .5rem;border-radius:999px;background:#eef2ff;color:#1e40af;font-weight:700;font-size:.8rem}

    .filters{display:flex;gap:.6rem;flex-wrap:wrap;align-items:center}
    .filters input,.filters select{padding:.5rem .7rem;border:1px solid var(--border);border-radius:8px;background:#fff}

    form .row{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}
    form .row-1{grid-template-columns:1fr}
    form label{font-weight:600;color:var(--heading);font-size:.9rem}
    form input, form textarea, form select{width:100%;padding:.55rem .7rem;border:1px solid var(--border);border-radius:8px;background:#fff}
    form textarea{min-height:90px;resize:vertical}

    .hint{font-size:.8rem;color:var(--muted)}

    @media (max-width:960px){.layout{grid-template-columns:1fr}}

    /* Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
    .auth{position:fixed;inset:0;background:rgba(15,23,42,.9);display:grid;place-items:center;z-index:100}
    .auth .card{width:min(420px,92%);background:#fff;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow-2);padding:1rem}
  </style>
</head>
<body>
  <header class="site" role="banner">
    <div class="container nav" aria-label="Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„">
      <a class="brand" href="index.html" aria-label="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
        <span class="brand-mark" aria-hidden="true">ğŸ› ï¸</span>
        <span>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ø±Ø¶</span>
      </a>
      <div class="toolbar">
        <button id="btnExport" type="button" class="btn">ØªØµØ¯ÙŠØ± JSON</button>
        <label class="btn soft" for="importFile">Ø§Ø³ØªÙŠØ±Ø§Ø¯ JSON</label>
        <input id="importFile" type="file" accept="application/json" style="display:none" />
        <button id="btnNew" type="button" class="btn">Ø³ÙŠØ§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
        <button id="btnSaveAll" type="button" class="btn primary">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="layout">
      <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª -->
      <div class="panel" aria-labelledby="listHeading">
        <header>
          <strong id="listHeading">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</strong>
          <span><span id="count" class="badge">0</span></span>
        </header>
        <div class="content">
          <div class="filters" style="margin-bottom:.7rem">
            <input id="search" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„ÙˆØ³ÙˆÙ…" aria-label="Ø¨Ø­Ø«" />
            <select id="sort">
              <option value="recent">Ø§Ù„Ø£Ø­Ø¯Ø« Ø¥Ø¶Ø§ÙØ©</option>
              <option value="price-asc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ø±Ø®Øµ Ù„Ù„Ø£ØºÙ„Ù‰</option>
              <option value="price-desc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£ØºÙ„Ù‰ Ù„Ù„Ø£Ø±Ø®Øµ</option>
              <option value="year-desc">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„: Ù…Ù† Ø§Ù„Ø£Ø­Ø¯Ø« Ù„Ù„Ø£Ù‚Ø¯Ù…</option>
              <option value="year-asc">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„: Ù…Ù† Ø§Ù„Ø£Ù‚Ø¯Ù… Ù„Ù„Ø£Ø­Ø¯Ø«</option>
            </select>
            <button id="btnResetFilters" class="btn soft">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
          </div>
          <div id="list" class="list" aria-live="polite"></div>
        </div>
      </div>

      <!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙØ§ØµÙŠÙ„ -->
      <div class="panel" aria-labelledby="formHeading">
        <header>
          <strong id="formHeading">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</strong>
          <span class="hint" id="formStatus"></span>
        </header>
        <div class="content">
          <form id="carForm">
            <div class="row">
              <div>
                <label for="make">Ø§Ù„Ø´Ø±ÙƒØ©</label>
                <input id="make" required />
              </div>
              <div>
                <label for="model">Ø§Ù„Ø·Ø±Ø§Ø²</label>
                <input id="model" required />
              </div>
            </div>

            <div class="row">
              <div>
                <label for="year">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ (Ø³Ù†Ø©)</label>
                <input id="year" type="number" min="1990" max="2099" required />
              </div>
              <div>
                <label for="price">Ø§Ù„Ø³Ø¹Ø± (Ø¯ÙŠÙ†Ø§Ø±)</label>
                <input id="price" type="number" min="0" step="100" required />
              </div>
            </div>

            <div class="row">
              <div>
                <label for="mileage">Ø§Ù„Ù…Ø´ÙÙ‰ (ÙƒÙ…)</label>
                <input id="mileage" type="number" min="0" step="100" required />
              </div>
              <div>
                <label for="seats">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø§Ø¹Ø¯</label>
                <input id="seats" type="number" min="1" max="9" required />
              </div>
            </div>

            <div class="row">
              <div>
                <label for="transmission">Ù†Ø§Ù‚Ù„ Ø§Ù„Ø­Ø±ÙƒØ©</label>
                <select id="transmission">
                  <option value="Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ">Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ</option>
                  <option value="Ø¹Ø§Ø¯ÙŠ">Ø¹Ø§Ø¯ÙŠ</option>
                </select>
              </div>
              <div>
                <label for="fuel">Ø§Ù„ÙˆÙ‚ÙˆØ¯</label>
                <select id="fuel">
                  <option value="Ø¨Ù†Ø²ÙŠÙ†">Ø¨Ù†Ø²ÙŠÙ†</option>
                  <option value="Ø¯ÙŠØ²Ù„">Ø¯ÙŠØ²Ù„</option>
                  <option value="ÙƒÙ‡Ø±Ø¨Ø§Ø¡">ÙƒÙ‡Ø±Ø¨Ø§Ø¡</option>
                  <option value="Ù‡Ø§ÙŠØ¨Ø±Ø¯">Ù‡Ø§ÙŠØ¨Ø±Ø¯</option>
                </select>
              </div>
            </div>

            <div class="row-1 row">
              <div>
                <label for="images">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØµÙˆØ± (Ø³Ø·Ø± Ù„ÙƒÙ„ Ø±Ø§Ø¨Ø·)</label>
                <textarea id="images" placeholder="https://...\nhttps://..." ></textarea>
                <div class="hint">ÙŠØªÙ… Ø¹Ø±Ø¶ Ø£ÙˆÙ„ ØµÙˆØ±Ø© ÙƒØµÙˆØ±Ø© Ø±Ø¦ÙŠØ³ÙŠØ©.</div>
                <div style="margin-top:.5rem">
                  <label class="btn soft" for="imageFiles">Ø±ÙØ¹ ØµÙˆØ± Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ</label>
                  <input id="imageFiles" type="file" accept="image/*" multiple style="display:none" />
                  <span class="hint">Ø³ÙŠØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± ÙˆØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</span>
                </div>
              </div>
            </div>

            <div class="row-1 row">
              <div>
                <label for="tags">Ø§Ù„ÙˆØ³ÙˆÙ… (Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)</label>
                <input id="tags" placeholder="Ø§Ù‚ØªØµØ§Ø¯ÙŠØ©, Ø¹Ø§Ø¦Ù„ÙŠØ©, ..." />
              </div>
            </div>

            <div class="row-1 row">
              <div>
                <label for="description">Ø§Ù„ÙˆØµÙ</label>
                <textarea id="description" placeholder="ÙˆØµÙ Ù…Ø®ØªØµØ±..." ></textarea>
              </div>
            </div>

            <div class="row-1 row">
              <div class="hint">Ø§Ù„Ù…Ø¹Ø±Ù‘Ù ÙŠÙÙˆÙ„Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø§Ù„ØµÙŠØºØ©: make-model-year (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø­ÙØ¸).</div>
            </div>

            <div style="display:flex;gap:.6rem;flex-wrap:wrap">
              <button type="submit" class="btn primary">Ø­ÙØ¸ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</button>
              <button type="button" id="btnDelete" class="btn danger">Ø­Ø°Ù</button>
              <button type="button" id="btnResetForm" class="btn soft">ØªÙØ±ÙŠØº Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</button>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- Ø´Ø§Ø´Ø© Ø¯Ø®ÙˆÙ„ Ø¨ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¨Ø³ÙŠØ·Ø© -->
  <div id="auth" class="auth" aria-hidden="true">
    <div class="card">
      <h2 style="margin-top:0">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <p class="hint" style="margin:.2rem 0 .8rem">Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.</p>
      <input id="authPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="width:100%;padding:.6rem .7rem;border:1px solid var(--border);border-radius:8px" />
      <div id="authError" class="hint" style="color:#b91c1c;margin-top:.4rem;display:none">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©</div>
      <div style="display:flex;gap:.6rem;margin-top:.8rem;justify-content:flex-end">
        <button id="authSubmit" class="btn primary">Ø¯Ø®ÙˆÙ„</button>
      </div>
    </div>
  </div>

  <!-- ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Supabase (Ø§Ù†Ø³Ø® config.example.js Ø¥Ù„Ù‰ config.js ÙˆØ¶Ø¹ Ù…ÙØ§ØªÙŠØ­Ùƒ) -->
  <script src="config.js"></script>
  <!-- Ù…ÙƒØªØ¨Ø© Supabase (UMD) ØªØ¶Ø¹ window.supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  
  <script src="admin.js"></script>
</body>
</html>